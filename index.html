<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CyberFit Ecosystem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#f0f7ff',
                            100: '#e0effe',
                            200: '#bae0fd',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            900: '#0c4a6e',
                        },
                        background: '#f8fafc',
                        surface: '#ffffff',
                        border: '#e2e8f0'
                    },
                    fontFamily: {
                        heading: ['Outfit', 'sans-serif'],
                        body: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #f8fafc;
            color: #0f172a;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        .active-tab-glow { position: relative; }
        .active-tab-glow::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background: #0ea5e9;
            border-radius: 50%;
            box-shadow: 0 0 8px #0ea5e9;
        }
        .glass-nav {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(226, 232, 240, 0.5);
        }
        /* Hide scrollbars for cleaner mobile look */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes pulse-soft {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        .animate-pulse-soft { animation: pulse-soft 2s infinite ease-in-out; }
    </style>
    <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@^1.38.0",
        "react": "https://esm.sh/react@^19.2.3",
        "react-dom": "https://esm.sh/react-dom@^19.2.3",
        "react-dom/client": "https://esm.sh/react-dom@^19.2.3/client",
        "recharts": "https://esm.sh/recharts@^3.6.0"
      }
    }
    </script>
</head>
<body class="flex justify-center">
    <div id="root" class="w-full max-w-md min-h-screen bg-background relative shadow-2xl"></div>

    <script type="module">
        import React, { useState, useEffect, useMemo, useRef } from 'react';
        import ReactDOM from 'react-dom/client';
        import { GoogleGenAI } from "@google/genai";
        import { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, LineChart, Line } from 'recharts';

        // --- CONFIGURATION ---
        const STRAVA_CLIENT_ID = '197251';
        const STRAVA_CLIENT_SECRET = '1804f8f58f54354fddc9ee5e6180912e66d2f376';
        const REDIRECT_URI = window.location.origin + window.location.pathname;
        const STORAGE_KEY = 'cyberfit_v_final';

        // --- CORE SERVICES ---
        const aiService = {
            async getInsights(state) {
                const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                const recentWorkouts = state.workouts.slice(-3).map(w => w.label).join(', ');
                const recentWeight = state.healthHistory.slice(-1)[0]?.weight || 'onbekend';
                
                try {
                    const res = await ai.models.generateContent({
                        model: 'gemini-3-flash-preview',
                        contents: `Analyseer de fitness voortgang. Recente trainingen: ${recentWorkouts}. Laatste gewicht: ${recentWeight}kg. Maaltijden vandaag: ${state.mealHistory.length}. Geef 3 korte, krachtige motiverende tips in het Nederlands.`
                    });
                    return res.text || "Blijf consistent, dat is de sleutel tot succes!";
                } catch { return "Focus op je proces, de resultaten volgen vanzelf."; }
            },
            async scanMeal(base64) {
                const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                try {
                    const res = await ai.models.generateContent({
                        model: 'gemini-3-flash-preview',
                        contents: {
                            parts: [
                                { text: "Analyseer deze maaltijd. Geef alleen een JSON object terug met deze velden: {name, calories, protein, carbs, fats, fiber}. Schat de grammen en kcal." },
                                { inlineData: { mimeType: 'image/jpeg', data: base64.split(',')[1] } }
                            ]
                        },
                        config: { responseMimeType: "application/json" }
                    });
                    return JSON.parse(res.text || '{}');
                } catch (e) { console.error(e); throw e; }
            }
        };

        const stravaService = {
            connect() {
                const params = new URLSearchParams({
                    client_id: STRAVA_CLIENT_ID,
                    redirect_uri: REDIRECT_URI,
                    response_type: 'code',
                    approval_prompt: 'auto',
                    scope: 'read,activity:read_all'
                });
                window.location.href = `https://www.strava.com/oauth/authorize?${params.toString()}`;
            },
            async exchangeToken(code) {
                const res = await fetch('https://www.strava.com/oauth/token', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        client_id: STRAVA_CLIENT_ID, 
                        client_secret: STRAVA_CLIENT_SECRET, 
                        code, 
                        grant_type: 'authorization_code' 
                    })
                });
                const data = await res.json();
                localStorage.setItem('strava_tokens', JSON.stringify(data));
                return data;
            },
            async fetchLatestRuns() {
                const stored = localStorage.getItem('strava_tokens');
                if (!stored) return [];
                const tokens = JSON.parse(stored);
                // Simple refresh check would go here, omitting for brevity
                const res = await fetch(`https://www.strava.com/api/v3/athlete/activities?per_page=10`, {
                    headers: { 'Authorization': `Bearer ${tokens.access_token}` }
                });
                if (!res.ok) return [];
                const data = await res.json();
                return data.filter(a => a.type === 'Run').map(a => ({
                    id: `strava-${a.id}`,
                    distance: (a.distance / 1000).toFixed(2),
                    duration: Math.round(a.moving_time / 60),
                    date: a.start_date,
                    source: 'strava'
                }));
            }
        };

        // --- REUSABLE COMPONENTS ---
        const Card = ({ children, className = "" }) => (
            <div className={`bg-white rounded-[32px] border border-slate-100 shadow-sm p-5 ${className}`}>{children}</div>
        );

        // --- VIEWS ---
        const Dashboard = ({ state }) => {
            const [insights, setInsights] = useState('Analyseert jouw data...');
            useEffect(() => { aiService.getInsights(state).then(setInsights); }, []);

            const chartData = useMemo(() => state.healthHistory.slice(-7).map(h => ({
                name: new Date(h.date).toLocaleDateString('nl-NL', { day: '2-digit', month: '2-digit' }),
                weight: h.weight
            })), [state.healthHistory]);

            return (
                <div className="p-6 space-y-6 pb-28 animate-in fade-in duration-500">
                    <div className="flex justify-between items-center">
                        <h1 className="text-3xl font-heading font-bold text-slate-900">Overzicht</h1>
                        <div className="w-10 h-10 bg-brand-50 rounded-full flex items-center justify-center text-xl">ðŸ‘¤</div>
                    </div>

                    <div className="bg-gradient-to-br from-brand-600 to-brand-700 p-6 rounded-[32px] text-white shadow-xl shadow-brand-100 relative overflow-hidden">
                        <div className="relative z-10 space-y-4">
                            <div className="flex items-center gap-2">
                                <div className="p-1.5 bg-white/20 rounded-lg backdrop-blur-md">âœ¨</div>
                                <span className="text-[10px] font-bold uppercase tracking-widest opacity-80">AI Coach</span>
                            </div>
                            <p className="text-sm font-medium leading-relaxed italic">"{insights}"</p>
                        </div>
                        <div className="absolute -bottom-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"></div>
                    </div>

                    <Card>
                        <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest mb-6">Gewichtsverloop</h3>
                        <div className="h-48 w-full">
                            {chartData.length > 0 ? (
                                <ResponsiveContainer width="100%" height="100%">
                                    <AreaChart data={chartData}>
                                        <defs>
                                            <linearGradient id="colorWeight" x1="0" y1="0" x2="0" y2="1">
                                                <stop offset="5%" stopColor="#0ea5e9" stopOpacity={0.2}/>
                                                <stop offset="95%" stopColor="#0ea5e9" stopOpacity={0}/>
                                            </linearGradient>
                                        </defs>
                                        <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#f1f5f9" />
                                        <XAxis dataKey="name" axisLine={false} tickLine={false} tick={{fontSize: 10, fill: '#94a3b8'}} />
                                        <YAxis hide domain={['dataMin - 1', 'dataMax + 1']} />
                                        <Tooltip contentStyle={{borderRadius: '16px', border: 'none', boxShadow: '0 10px 15px -3px rgb(0 0 0 / 0.1)'}} />
                                        <Area type="monotone" dataKey="weight" stroke="#0ea5e9" strokeWidth={3} fill="url(#colorWeight)" dot={{r: 4, fill: '#0ea5e9', strokeWidth: 2, stroke: '#fff'}} />
                                    </AreaChart>
                                </ResponsiveContainer>
                            ) : (
                                <div className="h-full flex items-center justify-center text-slate-300 text-xs italic">Nog geen data beschikbaar</div>
                            )}
                        </div>
                    </Card>

                    <div className="grid grid-cols-2 gap-4">
                        <Card className="text-center">
                            <div className="text-[9px] font-bold text-slate-400 uppercase mb-1">Trainingen</div>
                            <div className="text-2xl font-bold">{state.workouts.length}</div>
                        </Card>
                        <Card className="text-center">
                            <div className="text-[9px] font-bold text-slate-400 uppercase mb-1">Maaltijden</div>
                            <div className="text-2xl font-bold">{state.mealHistory.length}</div>
                        </Card>
                    </div>
                </div>
            );
        };

        const Gym = ({ state, onAddSet, onStart, onFinish }) => {
            const [view, setView] = useState('log');
            const [exercise, setExercise] = useState('');
            const [weight, setWeight] = useState('');
            const [reps, setReps] = useState('');
            
            const activeSession = state.workouts.find(w => !w.isCompleted);

            return (
                <div className="p-6 space-y-6 pb-28">
                    <div className="flex justify-between items-end">
                        <h2 className="text-2xl font-heading font-bold">Krachttraining</h2>
                        <div className="bg-slate-100 p-1 rounded-2xl flex gap-1">
                            <button onClick={() => setView('log')} className={`px-4 py-1.5 text-[10px] font-bold rounded-xl transition-all ${view === 'log' ? 'bg-white shadow-sm text-brand-600' : 'text-slate-500'}`}>Loggen</button>
                            <button onClick={() => setView('history')} className={`px-4 py-1.5 text-[10px] font-bold rounded-xl transition-all ${view === 'history' ? 'bg-white shadow-sm text-brand-600' : 'text-slate-500'}`}>Historie</button>
                        </div>
                    </div>

                    {view === 'log' ? (
                        !activeSession ? (
                            <div className="bg-white p-12 rounded-[40px] border border-slate-100 text-center space-y-6 shadow-sm">
                                <div className="text-6xl">ðŸ”¥</div>
                                <div>
                                    <h3 className="font-bold text-lg text-slate-900">Klaar om te knallen?</h3>
                                    <p className="text-xs text-slate-400 mt-1">Start een sessie om sets te loggen.</p>
                                </div>
                                <button onClick={() => onStart("Push Session")} className="w-full bg-slate-900 text-white font-bold p-5 rounded-3xl shadow-xl active:scale-95 transition-all">Start Training</button>
                            </div>
                        ) : (
                            <div className="space-y-6">
                                <div className="bg-brand-600 p-5 rounded-[32px] text-white flex justify-between items-center shadow-lg">
                                    <div><div className="text-[10px] font-bold opacity-60 uppercase tracking-widest">Sessie</div><div className="font-bold">{activeSession.label}</div></div>
                                    <button onClick={() => onFinish(activeSession.id)} className="bg-white/20 px-4 py-2 rounded-2xl text-[10px] font-black uppercase">Finish</button>
                                </div>
                                <form onSubmit={(e) => { e.preventDefault(); if(!exercise || !weight || !reps) return; onAddSet(activeSession.id, { id: crypto.randomUUID(), name: exercise, weight: Number(weight), reps: Number(reps), date: new Date().toISOString() }); setWeight(''); setReps(''); }} className="space-y-4">
                                    <input value={exercise} onChange={e => setExercise(e.target.value)} placeholder="Oefening..." className="w-full bg-white p-5 rounded-[24px] border border-slate-200 outline-none text-lg font-bold text-slate-800" />
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="relative">
                                            <input type="number" step="0.25" value={weight} onChange={e => setWeight(e.target.value)} placeholder="KG" className="w-full p-5 rounded-[24px] bg-white border border-slate-200 text-center text-2xl font-bold outline-none" />
                                            <div className="absolute top-2 left-1/2 -translate-x-1/2 text-[8px] font-black text-slate-300 uppercase">Weight</div>
                                        </div>
                                        <div className="relative">
                                            <input type="number" value={reps} onChange={e => setReps(e.target.value)} placeholder="REPS" className="w-full p-5 rounded-[24px] bg-white border border-slate-200 text-center text-2xl font-bold outline-none" />
                                            <div className="absolute top-2 left-1/2 -translate-x-1/2 text-[8px] font-black text-slate-300 uppercase">Reps</div>
                                        </div>
                                    </div>
                                    <button type="submit" className="w-full bg-slate-900 text-white p-5 rounded-[24px] font-bold shadow-xl active:scale-95 transition-all">Log Set</button>
                                </form>
                                <div className="space-y-3">
                                    {activeSession.exercises.slice().reverse().map(e => (
                                        <div key={e.id} className="bg-white p-4 rounded-2xl border border-slate-100 flex justify-between items-center shadow-sm animate-in slide-in-from-bottom-2">
                                            <span className="font-bold text-slate-700">{e.name}</span>
                                            <span className="text-brand-600 font-black">{e.weight}kg Ã— {e.reps}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )
                    ) : (
                        <div className="space-y-4">
                            {state.workouts.filter(w => w.isCompleted).slice().reverse().map(session => (
                                <Card key={session.id}>
                                    <div className="flex justify-between items-center mb-4">
                                        <div><div className="font-bold text-slate-800">{session.label}</div><div className="text-[10px] text-slate-400 font-bold uppercase">{new Date(session.date).toLocaleDateString()}</div></div>
                                        <div className="text-[10px] font-black bg-brand-50 text-brand-600 px-3 py-1 rounded-full">{session.exercises.length} SETS</div>
                                    </div>
                                    <div className="space-y-1 opacity-60">
                                        {Object.entries(session.exercises.reduce((acc, cur) => ({...acc, [cur.name]: [...(acc[cur.name] || []), cur]}), {})).map(([name, sets]) => (
                                            <div key={name} className="flex justify-between text-[11px] py-1 border-b border-slate-50 last:border-0">
                                                <span className="font-medium">{name}</span>
                                                <span className="font-bold">{sets.map(s => `${s.weight}x${s.reps}`).join(', ')}</span>
                                            </div>
                                        ))}
                                    </div>
                                </Card>
                            ))}
                            {state.workouts.length === 0 && <div className="text-center py-20 italic text-slate-300">Geen historie gevonden</div>}
                        </div>
                    )}
                </div>
            );
        };

        const Scanner = ({ onAdd, daily }) => {
            const [loading, setLoading] = useState(false);
            const [preview, setPreview] = useState(null);
            const [result, setResult] = useState(null);
            const inputRef = useRef(null);

            const handleCapture = async (e) => {
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onloadend = async () => {
                    const base64 = reader.result;
                    setPreview(base64);
                    setLoading(true);
                    try { const data = await aiService.scanMeal(base64); setResult(data); }
                    catch { alert("Oeps! Kon maaltijd niet herkennen."); }
                    finally { setLoading(false); }
                };
                reader.readAsDataURL(file);
            };

            return (
                <div className="p-6 space-y-6 pb-28">
                    <h2 className="text-2xl font-heading font-bold">AI Scanner</h2>
                    
                    <div className="bg-white p-5 rounded-[32px] border border-slate-100 shadow-sm grid grid-cols-4 gap-2 text-center">
                        {['kcal', 'eiwit', 'koolh', 'vet'].map((m, i) => (
                            <div key={m}><div className="text-[9px] font-bold text-slate-400 uppercase tracking-tighter">{m}</div><div className="text-sm font-black text-slate-900">{Object.values(daily)[i]}{i > 0 ? 'g' : ''}</div></div>
                        ))}
                    </div>

                    <div className="space-y-4">
                        {!preview ? (
                            <button onClick={() => inputRef.current.click()} className="w-full aspect-square bg-white border-2 border-dashed border-slate-200 rounded-[48px] flex flex-col items-center justify-center gap-4 transition-all active:scale-95 group">
                                <div className="w-20 h-20 bg-brand-50 rounded-full flex items-center justify-center text-4xl group-hover:scale-110 transition-transform">ðŸ“¸</div>
                                <span className="font-bold text-slate-400 uppercase tracking-widest text-[10px]">Tik om te scannen</span>
                            </button>
                        ) : (
                            <div className="bg-white rounded-[40px] overflow-hidden border border-slate-200 shadow-2xl relative">
                                <img src={preview} className="w-full aspect-square object-cover" />
                                {loading ? (
                                    <div className="absolute inset-0 bg-white/80 backdrop-blur-md flex flex-col items-center justify-center gap-4">
                                        <div className="w-12 h-12 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"></div>
                                        <p className="font-bold text-slate-900 animate-pulse-soft">AI berekent macro's...</p>
                                    </div>
                                ) : result && (
                                    <div className="p-8 space-y-6">
                                        <div><h3 className="text-2xl font-bold text-slate-900">{result.name}</h3><div className="text-4xl font-black text-brand-600 mt-2">{result.calories} <span className="text-xs font-normal text-slate-400 uppercase">kcal</span></div></div>
                                        <div className="grid grid-cols-3 gap-4 border-t border-slate-100 pt-6">
                                            <div><div className="text-[9px] font-bold text-slate-400 uppercase">Eiwit</div><div className="text-lg font-bold">{result.protein}g</div></div>
                                            <div><div className="text-[9px] font-bold text-slate-400 uppercase">Koolh</div><div className="text-lg font-bold">{result.carbs}g</div></div>
                                            <div><div className="text-[9px] font-bold text-slate-400 uppercase">Vet</div><div className="text-lg font-bold">{result.fats}g</div></div>
                                        </div>
                                        <div className="flex gap-3 pt-4">
                                            <button onClick={() => {setPreview(null); setResult(null);}} className="flex-1 bg-slate-100 p-5 rounded-3xl font-bold text-slate-500">Reset</button>
                                            <button onClick={() => {onAdd({id: crypto.randomUUID(), ...result, date: new Date().toISOString()}); setPreview(null); setResult(null);}} className="flex-[2] bg-brand-600 p-5 rounded-3xl font-bold text-white shadow-lg">Voeg Toe</button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}
                    </div>
                    <input type="file" ref={inputRef} onChange={handleCapture} accept="image/*" capture="environment" className="hidden" />
                </div>
            );
        };

        // --- MAIN APPLICATION ---
        const App = () => {
            const [state, setState] = useState(loadState());
            const [tab, setTab] = useState('dashboard');

            useEffect(() => { saveState(state); }, [state]);

            useEffect(() => {
                const params = new URLSearchParams(window.location.search);
                const code = params.get('code');
                if (code) {
                    window.history.replaceState({}, '', window.location.pathname);
                    stravaService.exchangeToken(code).then(() => {
                        setState(s => ({...s, stravaLinked: true}));
                        setTab('cardio');
                    });
                }
            }, []);

            const dailyMacros = useMemo(() => {
                const today = state.mealHistory.filter(m => new Date(m.date).toDateString() === new Date().toDateString());
                return today.reduce((acc, m) => ({ 
                    cal: acc.cal + m.calories, prot: acc.prot + m.protein, carbs: acc.carbs + m.carbs, fats: acc.fats + m.fats 
                }), { cal: 0, prot: 0, carbs: 0, fats: 0 });
            }, [state.mealHistory]);

            const handleAddCardio = (entry) => {
                setState(prev => ({ ...prev, cardioHistory: [entry, ...prev.cardioHistory] }));
            };

            const handleUpdateHealth = (e) => {
                e.preventDefault();
                const form = e.target;
                const stats = {
                    date: new Date().toISOString(),
                    weight: parseFloat(form.weight.value),
                    sleep: parseFloat(form.sleep.value),
                    calories: parseInt(form.cal.value),
                    protein: parseInt(form.prot.value)
                };
                setState(prev => ({ ...prev, healthHistory: [...prev.healthHistory, stats] }));
                form.reset();
                alert("Biometrie bijgewerkt!");
            };

            return (
                <div className="min-h-screen flex flex-col">
                    <main className="flex-1 overflow-y-auto no-scrollbar">
                        {tab === 'dashboard' && <Dashboard state={state} />}
                        {tab === 'gym' && (
                            <Gym 
                                state={state} 
                                onStart={(l) => setState(s => ({...s, workouts: [...s.workouts, {id: crypto.randomUUID(), date: new Date().toISOString(), label: l, exercises: [], isCompleted: false}]}))} 
                                onAddSet={(sid, set) => setState(s => ({...s, workouts: s.workouts.map(w => w.id === sid ? {...w, exercises: [...w.exercises, set]} : w)}))} 
                                onFinish={(sid) => setState(s => ({...s, workouts: s.workouts.map(w => w.id === sid ? {...w, isCompleted: true} : w)}))}
                            />
                        )}
                        {tab === 'scanner' && <Scanner onAdd={(m) => setState(s => ({...s, mealHistory: [m, ...s.mealHistory]}))} daily={dailyMacros} />}
                        {tab === 'cardio' && (
                            <div className="p-6 space-y-6">
                                <h2 className="text-2xl font-bold">Cardio Sync</h2>
                                <button onClick={() => stravaService.connect()} className={`w-full p-6 rounded-[32px] font-bold flex items-center justify-center gap-3 transition-all ${state.stravaLinked ? 'bg-slate-900 text-white' : 'bg-[#FC4C02] text-white shadow-xl'}`}>
                                    <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169"/></svg>
                                    {state.stravaLinked ? 'Strava Gekoppeld' : 'Koppel Strava'}
                                </button>
                                <div className="space-y-4">
                                    {state.cardioHistory.map(c => (
                                        <Card key={c.id} className="flex justify-between items-center">
                                            <div><div className="font-bold text-lg">{c.distance} km</div><div className="text-[10px] text-slate-400 font-bold uppercase">{c.duration} min â€¢ {new Date(c.date).toLocaleDateString()}</div></div>
                                            {c.source === 'strava' && <div className="bg-orange-50 text-[#FC4C02] font-black text-[8px] px-2 py-1 rounded-full uppercase tracking-widest">Verified</div>}
                                        </Card>
                                    ))}
                                    {state.cardioHistory.length === 0 && <div className="text-center py-20 italic text-slate-300">Geen runs gevonden</div>}
                                </div>
                            </div>
                        )}
                        {tab === 'health' && (
                            <div className="p-6 space-y-6">
                                <h2 className="text-2xl font-bold">Biometrie</h2>
                                <form onSubmit={handleUpdateHealth} className="space-y-4">
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-white p-5 rounded-[24px] border border-slate-200">
                                            <div className="text-[9px] font-bold text-slate-400 uppercase mb-2">Gewicht (kg)</div>
                                            <input name="weight" type="number" step="0.1" required className="w-full text-2xl font-bold outline-none" placeholder="0.0" />
                                        </div>
                                        <div className="bg-white p-5 rounded-[24px] border border-slate-200">
                                            <div className="text-[9px] font-bold text-slate-400 uppercase mb-2">Slaap (u)</div>
                                            <input name="sleep" type="number" step="0.1" required className="w-full text-2xl font-bold outline-none" placeholder="0.0" />
                                        </div>
                                        <div className="bg-white p-5 rounded-[24px] border border-slate-200">
                                            <div className="text-[9px] font-bold text-slate-400 uppercase mb-2">Kcal Doel</div>
                                            <input name="cal" type="number" required className="w-full text-2xl font-bold outline-none" placeholder="0" />
                                        </div>
                                        <div className="bg-white p-5 rounded-[24px] border border-slate-200">
                                            <div className="text-[9px] font-bold text-slate-400 uppercase mb-2">Eiwit Doel</div>
                                            <input name="prot" type="number" required className="w-full text-2xl font-bold outline-none" placeholder="0" />
                                        </div>
                                    </div>
                                    <button type="submit" className="w-full bg-slate-900 text-white p-5 rounded-[24px] font-bold shadow-xl active:scale-95 transition-all">Opslaan</button>
                                </form>
                            </div>
                        )}
                    </main>

                    <nav className="fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-md glass-nav flex justify-around items-center p-5 z-50 rounded-t-[48px]">
                        <NavBtn icon="ðŸ " label="Home" active={tab === 'dashboard'} onClick={() => setTab('dashboard')} />
                        <NavBtn icon="ðŸ‹ï¸" label="Gym" active={tab === 'gym'} onClick={() => setTab('gym')} />
                        <NavBtn icon="ðŸ“¸" label="Scan" active={tab === 'scanner'} onClick={() => setTab('scanner')} />
                        <NavBtn icon="ðŸƒ" label="Cardio" active={tab === 'cardio'} onClick={() => setTab('cardio')} />
                        <NavBtn icon="ðŸ‘¤" label="Profiel" active={tab === 'health'} onClick={() => setTab('health')} />
                    </nav>
                </div>
            );
        };

        const NavBtn = ({ icon, label, active, onClick }) => (
            <button onClick={onClick} className={`flex flex-col items-center gap-1 transition-all ${active ? 'text-brand-600 active-tab-glow scale-110' : 'text-slate-400 opacity-60'}`}>
                <span className="text-xl">{icon}</span>
                <span className="text-[9px] font-black uppercase tracking-widest">{label}</span>
            </button>
        );

        const loadState = () => {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : { workouts: [], cardioHistory: [], healthHistory: [], mealHistory: [], stravaLinked: false };
        };
        const saveState = (s) => localStorage.setItem(STORAGE_KEY, JSON.stringify(s));

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
